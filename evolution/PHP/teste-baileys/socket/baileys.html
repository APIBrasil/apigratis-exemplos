<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Evolution Baileys</title>
    </head>
    <body>

        <code id="evolution">
            <strong>Escutando eventos do socket...</strong>
        </code>

    </body>
</html>

<script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>

<script>

    //***//***//***//***//***//***//***//***//***//***//***
    //*** PossÃ­veis eventos que podem ser escutados  //****
    //***//***//***//***//***//***//***//***//***//***//***
    
    // "APPLICATION_STARTUP",
    // "QRCODE_UPDATED",
    // "MESSAGES_SET",
    // "MESSAGES_UPSERT",
    // "MESSAGES_UPDATE",
    // "MESSAGES_DELETE",
    // "CHATS_UPDATE",
    // "CHATS_UPSERT",
    // "CHATS_SET",
    // "PRESENCE_UPDATE",
    // "CONTACTS_UPDATE",
    // "SEND_MESSAGE",
    // "CONTACTS_UPSERT",
    // "CONTACTS_SET",
    // "CONNECTION_UPDATE",
    // "GROUP_UPDATE",
    // "GROUPS_UPSERT",
    // "GROUP_PARTICIPANTS_UPDATE",
    // "CALL",
    // "NEW_JWT_TOKEN"

    const socket = io('https://socket.apibrasil.com.br', {
        query: {
            "bearer": '.........CJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.vwT4CM5BTl8_OmnKw8dIxi3qe1WPKcfTL3x6KhcwVaY', // seu BearerToken
            "channelName": '.....1ad0b479599e' //seu profileID
        },
        transports: ['websocket']
    });

    //socket success
    socket.on('connect', () => {
        console.log('Conectado ao socket');
    });

    // socket listen event for evolution
    socket.on('evolution', (evolution) => {

        console.log(evolution);

        const container = document.getElementById('evolution');
        const response = JSON.stringify(evolution?.data);

        let p = document.createElement('p');
        p.innerHTML = response;
        container.appendChild(p);

    });
</script>
